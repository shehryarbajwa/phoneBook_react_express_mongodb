(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,t,n){e.exports=n(47)},24:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(15),r=n.n(o),u=(n(24),n(18)),l=n(3),i=n(16),m=n(17),s=function(e){var t=e.name,n=e.number,a=e.handleDelete;return c.a.createElement("li",{className:"phone"},t," no: ",n," ",c.a.createElement("button",{onClick:a},"Delete contact"," ",c.a.createElement(i.a,{icon:m.a})))},f=n(4),d=n.n(f),h="/api/persons",b=function(){return d.a.get(h).then((function(e){return e.data}))},p=function(e){return d.a.post(h,e).then((function(e){return e.data}))},E=function(e,t){return d.a.delete("".concat(h,"/").concat(e),t).then((function(e){return e.data}))},v=function(e){var t=e.message;return null===t?null:c.a.createElement("div",{className:"error"},t)},j=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)("enter a name"),i=Object(l.a)(r,2),m=i[0],f=i[1],d=Object(a.useState)("XXX-XXX-XXXX"),h=Object(l.a)(d,2),j=h[0],O=h[1],k=Object(a.useState)(!1),X=Object(l.a)(k,2),g=(X[0],X[1],Object(a.useState)("some error happened...")),N=Object(l.a)(g,2),w=N[0],y=N[1];Object(a.useEffect)((function(){b().then((function(e){o(e)}))}),[]);return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(v,{message:w}),c.a.createElement("form",null,c.a.createElement("div",{className:"form-name"},"Name: ",c.a.createElement("input",{value:m,onChange:function(e){f(e.target.value)}})),c.a.createElement("div",{className:"form-number"},"Number: ",c.a.createElement("input",{value:j,onChange:function(e){O(e.target.value)}})),c.a.createElement("div",{className:"form-submit"},c.a.createElement("button",{onClick:function(e){e.preventDefault();var t={name:m,id:n.length+1,number:j};n.map((function(e){return e.name===t.name?void alert("".concat(m," is already added to phonebook")):o(n.concat(t))}));p(t).then((function(e){o(n.concat(e))})),f(""),O("")}},"Add Name"))),c.a.createElement("h2",null,"People"),c.a.createElement("div",null,n.map((function(e){return c.a.createElement(s,{key:e.id,name:e.name,number:e.number,handleDelete:function(){return function(e){if(window.confirm("Are you sure you want to delete this person?")){"http://localhost:3001/persons/".concat(e);var t=n.find((function(t){return t.id===e})),a=Object(u.a)({},t);E(e,a).then((function(e){o(n.filter((function(e){return e.id!==a.id}))),y("Note ".concat(a.name," was already removed from the phoneBook")),setTimeout((function(){y(null)}),5e3)})).catch((function(t){alert("This contact with ".concat(e," was already deleted"))}))}}(e.id)}})}))))};r.a.render(c.a.createElement(j,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.ba1560fe.chunk.js.map